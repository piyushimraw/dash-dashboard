---
phase: 02-mfe-migration
plan: 03
type: execute
wave: 2
depends_on: []
files_modified:
  - apps/mfe-settings/package.json
  - apps/mfe-settings/tsconfig.json
  - apps/mfe-settings/src/index.ts
  - apps/mfe-settings/src/SettingsPage.tsx
  - apps/mfe-reports/package.json
  - apps/mfe-reports/tsconfig.json
  - apps/mfe-reports/src/index.ts
  - apps/mfe-reports/src/ReportsPage.tsx
  - apps/mfe-aao/package.json
  - apps/mfe-aao/tsconfig.json
  - apps/mfe-aao/src/index.ts
  - apps/mfe-aao/src/AaoPage.tsx
  - apps/mfe-car-control/package.json
  - apps/mfe-car-control/tsconfig.json
  - apps/mfe-car-control/src/index.ts
  - apps/mfe-car-control/src/CarControlPage.tsx
  - apps/mfe-vehicle-exchange/package.json
  - apps/mfe-vehicle-exchange/tsconfig.json
  - apps/mfe-vehicle-exchange/src/index.ts
  - apps/mfe-vehicle-exchange/src/VehicleExchangePage.tsx
  - apps/shell/tsconfig.json
autonomous: true

must_haves:
  truths:
    - "Five simple MFE packages exist in apps/ directory (settings, reports, aao, car-control, vehicle-exchange)"
    - "Each MFE exports its page component via index.ts"
    - "MFE packages declare @packages/* as workspace dependencies"
    - "Shell tsconfig references all MFE packages for type checking"
  artifacts:
    - path: "apps/mfe-settings/src/index.ts"
      provides: "SettingsPage export"
      exports: ["SettingsPage"]
    - path: "apps/mfe-reports/src/index.ts"
      provides: "ReportsPage export"
      exports: ["ReportsPage"]
    - path: "apps/mfe-aao/src/index.ts"
      provides: "AaoPage export"
      exports: ["AaoPage"]
    - path: "apps/mfe-car-control/src/index.ts"
      provides: "CarControlPage export"
      exports: ["CarControlPage"]
    - path: "apps/mfe-vehicle-exchange/src/index.ts"
      provides: "VehicleExchangePage export"
      exports: ["VehicleExchangePage"]
  key_links:
    - from: "apps/shell/tsconfig.json"
      to: "apps/mfe-*/tsconfig.json"
      via: "TypeScript project references"
      pattern: 'path.*mfe-'
---

<objective>
Create five simple MFE packages (settings, reports, aao, car-control, vehicle-exchange) as workspace packages in apps/ directory.

Purpose: Establish the MFE package pattern with simple placeholder pages before tackling complex MFEs. These pages are currently ~7 lines each, making them ideal for pattern validation.

Output: Five MFE packages that can be imported by shell routes
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-mfe-migration/02-RESEARCH.md

# Source pages to extract
@apps/shell/src/pages/SettingPage.tsx
@apps/shell/src/pages/ReportsPage.tsx
@apps/shell/src/pages/AaoPage.tsx
@apps/shell/src/pages/CarControl.tsx
@apps/shell/src/pages/VehicleExchangePage.tsx

# Shell configuration
@apps/shell/tsconfig.json
@apps/shell/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create mfe-settings and mfe-reports packages</name>
  <files>
    apps/mfe-settings/package.json
    apps/mfe-settings/tsconfig.json
    apps/mfe-settings/src/index.ts
    apps/mfe-settings/src/SettingsPage.tsx
    apps/mfe-reports/package.json
    apps/mfe-reports/tsconfig.json
    apps/mfe-reports/src/index.ts
    apps/mfe-reports/src/ReportsPage.tsx
  </files>
  <action>
Create two MFE packages following the workspace pattern:

**For each MFE (mfe-settings, mfe-reports), create:**

1. **package.json**:
```json
{
  "name": "@apps/mfe-{name}",
  "version": "0.0.1",
  "private": true,
  "type": "module",
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "exports": {
    ".": {
      "types": "./src/index.ts",
      "import": "./src/index.ts"
    }
  },
  "dependencies": {
    "@packages/ui": "workspace:*",
    "@packages/event-bus": "workspace:*",
    "@packages/mfe-types": "workspace:*"
  },
  "peerDependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0"
  }
}
```

2. **tsconfig.json**:
```json
{
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "composite": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true,
    "noEmit": false
  },
  "references": [
    { "path": "../../packages/ui" },
    { "path": "../../packages/event-bus" },
    { "path": "../../packages/mfe-types" }
  ],
  "include": ["src"]
}
```

3. **src/index.ts**:
```typescript
export { SettingsPage } from "./SettingsPage";
// or for reports:
export { ReportsPage } from "./ReportsPage";
```

4. **src/[Page].tsx** - Copy from shell and convert to named export:
   - Copy content from `apps/shell/src/pages/SettingPage.tsx` -> `apps/mfe-settings/src/SettingsPage.tsx`
   - Copy content from `apps/shell/src/pages/ReportsPage.tsx` -> `apps/mfe-reports/src/ReportsPage.tsx`
   - Change `export default function` to `export function`
  </action>
  <verify>
Directories created: apps/mfe-settings/, apps/mfe-reports/ with package.json, tsconfig.json, src/
  </verify>
  <done>mfe-settings and mfe-reports packages created with correct structure</done>
</task>

<task type="auto">
  <name>Task 2: Create mfe-aao, mfe-car-control, mfe-vehicle-exchange packages</name>
  <files>
    apps/mfe-aao/package.json
    apps/mfe-aao/tsconfig.json
    apps/mfe-aao/src/index.ts
    apps/mfe-aao/src/AaoPage.tsx
    apps/mfe-car-control/package.json
    apps/mfe-car-control/tsconfig.json
    apps/mfe-car-control/src/index.ts
    apps/mfe-car-control/src/CarControlPage.tsx
    apps/mfe-vehicle-exchange/package.json
    apps/mfe-vehicle-exchange/tsconfig.json
    apps/mfe-vehicle-exchange/src/index.ts
    apps/mfe-vehicle-exchange/src/VehicleExchangePage.tsx
  </files>
  <action>
Create three more MFE packages following same pattern as Task 1:

**mfe-aao:**
- package.json with name "@apps/mfe-aao"
- tsconfig.json with composite: true
- src/index.ts exporting AaoPage
- src/AaoPage.tsx copied from shell/src/pages/AaoPage.tsx (convert to named export)

**mfe-car-control:**
- package.json with name "@apps/mfe-car-control"
- tsconfig.json with composite: true
- src/index.ts exporting CarControlPage
- src/CarControlPage.tsx copied from shell/src/pages/CarControl.tsx (convert to named export)

**mfe-vehicle-exchange:**
- package.json with name "@apps/mfe-vehicle-exchange"
- tsconfig.json with composite: true
- src/index.ts exporting VehicleExchangePage
- src/VehicleExchangePage.tsx copied from shell/src/pages/VehicleExchangePage.tsx (convert to named export)
  </action>
  <verify>
Directories created: apps/mfe-aao/, apps/mfe-car-control/, apps/mfe-vehicle-exchange/
  </verify>
  <done>Three additional MFE packages created</done>
</task>

<task type="auto">
  <name>Task 3: Update shell tsconfig and install dependencies</name>
  <files>
    apps/shell/tsconfig.json
    apps/shell/package.json
  </files>
  <action>
1. Update `apps/shell/tsconfig.json` to add MFE package references:
```json
{
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "composite": true,
    "noEmit": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "references": [
    { "path": "../../packages/ui" },
    { "path": "../../packages/api-client" },
    { "path": "../../packages/mfe-types" },
    { "path": "../mfe-settings" },
    { "path": "../mfe-reports" },
    { "path": "../mfe-aao" },
    { "path": "../mfe-car-control" },
    { "path": "../mfe-vehicle-exchange" }
  ],
  "include": ["src"]
}
```

2. Update `apps/shell/package.json` to add MFE workspace dependencies:
```json
"dependencies": {
  "@apps/mfe-settings": "workspace:*",
  "@apps/mfe-reports": "workspace:*",
  "@apps/mfe-aao": "workspace:*",
  "@apps/mfe-car-control": "workspace:*",
  "@apps/mfe-vehicle-exchange": "workspace:*",
  // ... existing deps
}
```

3. Run `pnpm install` to link workspace packages
  </action>
  <verify>
Run `pnpm install && pnpm --filter @apps/shell build` - shell compiles with MFE references
  </verify>
  <done>Shell configured with MFE package references and workspace dependencies</done>
</task>

</tasks>

<verification>
1. `ls apps/` shows mfe-settings, mfe-reports, mfe-aao, mfe-car-control, mfe-vehicle-exchange directories
2. `pnpm install` completes without errors
3. `pnpm --filter @apps/shell build` passes
4. Each MFE package has package.json, tsconfig.json, src/index.ts, src/*Page.tsx
</verification>

<success_criteria>
- Five MFE packages exist in apps/ directory
- Each MFE exports its page component via named export
- Shell tsconfig references all MFE packages
- Shell package.json includes MFE workspace dependencies
- pnpm install and shell build succeed
</success_criteria>

<output>
After completion, create `.planning/phases/02-mfe-migration/02-03-SUMMARY.md`
</output>
